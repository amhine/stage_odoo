<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="auth_assets" name="Auth Assets">
            <link rel="stylesheet" href="/ma_dgi_edi/static/src/css/auth_style.css"/>
            <link rel="stylesheet" href="/web/static/lib/fontawesome/css/font-awesome.css"/>
            <script src="/ma_dgi_edi/static/src/js/auth.js"></script>
        </template>

        <!-- Template de connexion -->
        <template id="auth_login_template" name="Connexion Déclarations Fiscales">
            <t t-call="website.layout">

                <t t-set="title">Connexion - Déclarations Fiscales</t>
                <t t-set="additional_title">Déclarations Fiscales</t>  
                <t t-call-assets="web.assets_frontend"/>

                <div class="fiscal-auth-container">
                    <div class="fiscal-auth-card">
                        <div class="fiscal-auth-header">
                            <h2>Connexion</h2>
                            <p>Accédez à vos déclarations fiscales</p>
                        </div>
                        
                        <t t-if="error">
                            <div class="alert alert-danger" role="alert">
                                <t t-esc="error"/>
                            </div>
                        </t>
                        
                        <t t-if="request.params.get('message')">
                            <div class="alert alert-success" role="alert">
                                <t t-esc="request.params.get('message')"/>
                            </div>
                        </t>
                        
                        <form action="/fiscal/authenticate" method="post" class="fiscal-auth-form">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" 
                                       id="email" 
                                       name="email" 
                                       class="form-control" 
                                       placeholder="votre.email@exemple.com"
                                       t-att-value="login or ''"
                                       required="required"/>
                            </div>
                            
                            <div class="form-group">
                                <label for="password">Mot de passe</label>
                                <div class="password-input-container">
                                    <input type="password" 
                                           id="password" 
                                           name="password" 
                                           class="form-control" 
                                           placeholder="********"
                                           required="required"/>
                                    <span class="password-toggle" onclick="togglePassword()">
                                        <i class="fa fa-eye"></i>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="remember_me" name="remember_me"/>
                                <label class="form-check-label" for="remember_me">
                                    Se souvenir de moi
                                </label>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block fiscal-btn-login">
                                <i class="fa fa-sign-in"></i> Se connecter
                            </button>
                        </form>
                        
                        <div class="fiscal-auth-footer">
                            <a href="/fiscal/forgot-password" class="forgot-password-link">
                                Mot de passe oublié ?
                            </a>
                        </div>
                    </div>
                    
                    
                </div>
            </t>
        </template>
        
        <!-- mot de passe oublié -->
        <template id="forgot_password_template" name="Mot de passe oublié">
            <t t-call="website.layout">
                <t t-set="title">Mot de passe oublié</t>
                
                <div class="fiscal-auth-container">
                    <div class="fiscal-auth-card">
                        <div class="fiscal-auth-header">
                            <h2>Mot de passe oublié</h2>
                            <p>Saisissez votre email pour recevoir les instructions</p>
                        </div>
                        
                        <t t-if="request.params.get('error')">
                            <div class="alert alert-danger">
                                <t t-esc="request.params.get('error')"/>
                            </div>
                        </t>
                        
                        <form action="/fiscal/reset-password" method="post">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" 
                                       id="email" 
                                       name="email" 
                                       class="form-control" 
                                       placeholder="votre.email@exemple.com"
                                       required="required"/>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block">
                                Envoyer les instructions
                            </button>
                        </form>
                        
                        <div class="fiscal-auth-footer">
                            <a href="/fiscal/login">Retour à la connexion</a>
                        </div>
                    </div>
                </div>
            </t>
        </template>
        
        <!-- Template tableau de bord -->
        <template id="dashboard_template" name="Tableau de bord">
            <t t-call="website.layout">
                <t t-set="title">Tableau de bord</t>
                
                <div class="container mt-4">
                    <div class="row">
                        <div class="col-md-12">
                            <h1>Bienvenue, <t t-esc="user.name"/></h1>
                            
                            <div class="alert alert-success">
                                Connexion réussie ! Vous pouvez maintenant accéder à vos déclarations fiscales.
                            </div>
                            
                            <div class="mt-3">
                                <a href="/fiscal/declarations" class="btn btn-primary me-2">
                                    <i class="fa fa-file-text"></i> Voir mes déclarations
                                </a>
                                <a href="/fiscal/logout" class="btn btn-secondary">
                                    <i class="fa fa-sign-out"></i> Se déconnecter
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>